{% liquid
    assign heading = section.settings.heading
    assign heading_size = section.settings.heading_size
    assign heading_weight = section.settings.heading_weight
    assign heading_color = section.settings.heading_color
    assign heading_font = section.settings.heading_font

    assign heading_size_mobile = section.settings.heading_size_mobile

    assign subheading = section.settings.subheading
    assign subheading_size = section.settings.subheading_size
    assign subheading_weight = section.settings.subheading_weight
    assign subheading_color = section.settings.subheading_color
    assign subheading_font = section.settings.subheading_font

    assign subheading_size_mobile = section.settings.subheading_size_mobile

    assign section_url = section.settings.section_url

    assign text_position = section.settings.text_position

    assign media_video = section.settings.media_video
    assign media_video_half_width = section.settings.media_video_half_width
    assign media_video_border_radius = section.settings.media_video_border_radius

    assign layout_margin_top = section.settings.layout_margin_top
    assign layout_margin_bottom = section.settings.layout_margin_bottom
    assign layout_background = section.settings.layout_background
    assign layout_max_width = section.settings.layout_max_width

%}
<style>

  
  .section-pc-{{section.id}} {
    border-top: solid #000000 0px;
    border-bottom: solid #000000 0px;
    margin-top: {{ layout_margin_top }}px;
    margin-bottom: {{ layout_margin_bottom }}px;
  }
  
  .section-pc-{{section.id}}-settings {
    margin: 0 auto;
    {% if layout_max_width == false %}
    padding-top: 27px;
    padding-bottom: 27px;
    padding-left: 1.5rem;
    padding-right: 1.5rem;
    {% endif %}
  }

  .video-banner-pc-{{section.id}} {
    height: 100%;
    width: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 16px 16px;
    border-radius: 8px;
    border: 0px solid #000000;
    position: relative;
    overflow: hidden;
    text-decoration: none;
  }

  .video-banner-media-pc-{{section.id}} {
    border-radius: {{ media_video_border_radius }}px;
  }

  .video-banner-media-pc-{{section.id}}:after {
    position: absolute;
    content: '';
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0, 0.1);
    border-radius: {{media_video_border_radius}}px;
  }

  .video-banner-media-pc-{{section.id}} img,
  .video-banner-media-pc-{{section.id}} > svg,
  .video-banner-media-pc-{{section.id}} iframe,
  .video-banner-media-pc-{{section.id}} video {
    display: block;
    object-fit: cover;
    width: 100%;
    height: 100%;
    box-shadow: none;
    border: 0px;
    border-radius: {{ media_video_border_radius }}px;
  }

  .video-banner-media-pc-{{section.id}} > svg path {
    fill: {{ heading_color }};
  }

  .video-banner-content-pc-{{section.id}} {
    height: 100%;
    position: relative;
    z-index: 2;
    display: flex;
    gap: 20px;
    transform: translateX(-64px);
    transition: all 0.35s ease 0s;
    align-items: end;
  }

  .video-banner-pc-{{section.id}}:hover .video-banner-content-pc-{{section.id}} {
    transform: translateX(0px);
    transition: all 0.35s ease 0s;
  }

  .video-banner-content-pc-{{section.id}} svg {
    flex: 0 0 48px;
    height: 48px;
    transform: rotate(180deg);
    opacity: 0;
    transition: all 0.35s ease 0s;
  }

  .video-banner-pc-{{section.id}}:hover .video-banner-content-pc-{{section.id}} svg {
    opacity: 1;
    transition: all 0.35s ease 0s;
  }

  .video-banner-heading-pc-{{section.id}} {
    margin: 0px;
    margin-top: 3px;
    color: {{ heading_color }};
    line-height: 130%;
    font-size: {{ heading_size_mobile }}px;
    font-weight: {{ heading_weight }};
    font-family: {{ heading_font.family }}, {{ heading_font.fallback_families }};
    text-transform: unset;
    word-break: break-word;
  }

  .video-banner-subheading-pc-{{section.id}} {
    margin: 0px;
    font-size: {{ suheading_size_mobile }}px;
    color: {{ subheading_color }};
    font-weight: {{ subheading_weight }};
    font-family: {{ subheading_font.family }}, {{ subheading_font.fallback_families }};
    line-height: 130%;
    text-transform: unset;
    word-break: break-word;
  }

  .video-banner-action-pc-{{section.id}} {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    z-index: 2;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    bottom: 31px;
    right: 31px;
    background-color: #ffffff;
  }

  .video-banner-action-pc-{{section.id}} svg {
    width: 14px;
    height: 14px;
  }

  .video-banner-action-pc-{{section.id}}.active .video-banner-pause-pc-{{section.id}},
  .video-banner-action-pc-{{section.id}} .video-banner-play-pc-{{section.id}} {
    display: none;
  }

  .video-banner-action-pc-{{section.id}}.active .video-banner-play-pc-{{section.id}} {
    display: block;
  }

  .video-banner-action-pc-{{section.id}} svg path {
    fill: #000000;
  }
  
  @media(min-width: 1024px) {

    .section-pc-{{section.id}} {
      margin-top: {{ layout_margin_top }}px;
      margin-bottom: {{ layout_margin_bottom }}px;
    }
    
    .section-pc-{{section.id}}-settings {
        {% if layout_max_width == false %}
      padding: 0 5rem;
      padding-top: 36px;
      padding-bottom: 36px;
      padding-left: 5rem;
      padding-right: 5rem;
      {% endif %}
    }

    .video-banner-pc-{{section.id}} {
      flex-direction: row;
      padding: 16px 16px;
    }

    .video-banner-content-pc-{{section.id}} {
      transform: translateX(-64px);
      align-items: end;
    }

    .video-banner-content-pc-{{section.id}} svg {
      flex: 0 0 48px;
      height: 48px;
      margin-bottom:10px;
    }

    .video-banner-heading-pc-{{section.id}} {
      margin-top: 4px;
      font-size: {{ heading_size }}px;
    }

    .video-banner-subheading-pc-{{section.id}} {
      font-size: {{ subheading_size }}px;
    }

    .video-banner-action-pc-{{section.id}} {
      bottom: 26px;
      right: 26px;
      width: 60px;
      height: 60px;
    }
  }</style>


  <style>
    .video-banner-pc-{{section.id}} {
      height: 310px;
    }
  
    @media(min-width: 1024px) {
      .video-banner-pc-{{section.id}} {
        height: 700px;
      }
    }
  </style>



  <style>
    .video-banner-pc-{{section.id}} {
      display: flex;
      justify-content: end;
      flex-direction: column;
    }
   .video-banner-pc-{{section.id}} .video-banner-media-pc-{{section.id}} {
      position: absolute;
      left: -0.5%;
      right: 0;
      top: -0.5%;
      bottom: 0;
      width: 101%;
      height: 101%;
    }
    .video-banner-pc-{{section.id}} .video-banner-action-pc-{{section.id}} {
      bottom: 16px;
      right: 16 px;
    }
    @media(min-width: 1024px) {
      .video-banner-pc-{{section.id}} .video-banner-action-pc-{{section.id}} {
        bottom: 20px;
        right: 26px;
      }
    }
  </style>




<div class="section-pc-{{section.id}} video-banner-wrapper-pc-{{section.id}}" style="background-color:{{ layout_background }}; background-image: ;">
    <div class="section-pc-{{section.id}}-settings">
      
      <a href="{{ section_url }}" class="video-banner-pc-{{section.id}}">
        <div class="video-banner-content-pc-{{section.id}}">
          <svg width="48" height="48" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true"><path fill="{{ heading_color }}" fill-rule="evenodd" clip-rule="evenodd" d="M4,12l8,8,1.41-1.41L7.83,13H20V11H7.83l5.59-5.59L12,4Z"></path></svg>
          <div class="video-banner-text-pc-{{section.id}}">
            {% if subheading != blank %}
                <p class="video-banner-subheading-pc-{{section.id}}">{{ subheading }}</p>
            {% endif %}
            
            {% if heading != blank %}
                <p class="video-banner-heading-pc-{{section.id}}">{{ heading }}</p>
            {% endif %}
            
          </div>
        </div>
        <div class="video-banner-media-pc-{{section.id}}">
          {% if media_video != blank %}
            {{ media_video |  video_tag: controls: false, loop: true, autoplay: true, muted: true, playsinline: true, preload: 'none' }}
            {% else %}
                <video src=" https://cdn.shopify.com/videos/c/o/v/8563fa4136484225b6a9fee73bda66f8.mp4" loop="true" autoplay muted playsinline ></video>
            {% endif %}
            
            
              <div class="video-banner-action-pc-{{section.id}}">
                <svg class="video-banner-pause-pc-{{section.id}}" width="12" height="14" viewBox="0 0 12 14" fill="none" xmlns="http://www.w3.org/2000/svg" role="img"><title>Pause</title><path d="M0 0H4V14H0V0Z" fill="currentColor"></path><path d="M8 0H12V14H8V0Z" fill="currentColor"></path></svg>
                <svg class="video-banner-play-pc-{{section.id}}" width="12" height="14" viewBox="0 0 12 14" fill="none" xmlns="http://www.w3.org/2000/svg" role="img"><title>Play</title><path d="M12 7L0 14L6.1196e-07 0L12 7Z" fill="currentColor"></path></svg>
              </div>
            
          </div>
      </a>
    </div>
</div>
{% schema %}
{
    "name": "PC Hero Video #2",
    "settings": [
      {
            "type": "header",
            "content": "This section is a property of PeakConversion",
            "info": "Do not sell or reproduce. contact us at franklinjounda@gmail.com for more info"
        },
        {
            "type": "header",
            "content": "Heading"
        },
        {
            "type": "text",
            "id": "heading",
            "label": "Heading",
            "default": "Your Heading"
        },
        {
            "type": "range",
            "id": "heading_size",
            "label": "Heading Size",
            "default": 50,
            "min": 10,
            "max": 100
        },
        {
            "type": "select",
            "id": "heading_weight",
            "label": "Heading Weight",
            "default": "600",
            "options": [
                {
                    "value": "400",
                    "label": "Normal"
                },
                {
                    "value": "600",
                    "label": "Semi-Bold"
                },
                {
                    "value": "700",
                    "label": "Bold"
                }
            ]
        },
        {
            "type": "color",
            "id": "heading_color",
            "label": "Heading Color",
            "default": "#ffffff"
        },
        {
            "type": "font_picker",
            "id": "heading_font",
            "label": "Heading Font",
            "default": "josefin_sans_n4"
        },
        {
            "type": "range",
            "id": "heading_size_mobile",
            "label": "Heading Size Mobile",
            "default": 20,
            "min": 10,
            "max": 100
        },
        {
            "type": "header",
            "content": "Subheading"
        },
        {
            "type": "text",
            "id": "subheading",
            "label": "Subheading",
            "default": "Your Subheading"
        },
        {
            "type": "range",
            "id": "subheading_size",
            "label": "Subheading Size",
            "default": 16,
            "min": 10,
            "max": 100
        },
        {
            "type": "select",
            "id": "subheading_weight",
            "label": "Subheading Weight",
            "default": "400",
            "options": [
                {
                    "value": "400",
                    "label": "Normal"
                },
                {
                    "value": "600",
                    "label": "Semi-Bold"
                },
                {
                    "value": "700",
                    "label": "Bold"
                }
            ]
        },
        {
            "type": "color",
            "id": "subheading_color",
            "label": "Subheading Color",
            "default": "#ffffff"
        },
        {
            "type": "font_picker",
            "id": "subheading_font",
            "label": "Subheading Font",
            "default": "josefin_sans_n4"
        },
        {
            "type": "range",
            "id": "subheading_size_mobile",
            "label": "Subheading Size Mobile",
            "default": 14,
            "min": 10,
            "max": 100
        },
        {
            "type": "url",
            "id": "section_url",
            "label": "Section URL"
        },
        {
            "type": "select",
            "id": "text_position",
            "label": "Text Position",
            "default": "center",
            "options": [
                {
                    "value": "left",
                    "label": "Left"
                },
                {
                    "value": "center",
                    "label": "Center"
                },
                {
                    "value": "right",
                    "label": "Right"
                }
            ]
        },
        {
            "type": "header",
            "content": "Media Video"
        },
        {
            "type": "video",
            "id": "media_video",
            "label": "Media Video"
        },
        {
            "type": "range",
            "id": "media_video_border_radius",
            "label": "Media Video Border Radius",
            "default": 8,
            "min": 0,
            "max": 50
        },
        {
            "type": "header",
            "content": "Layout"
        },
        {
            "type": "range",
            "id": "layout_margin_top",
            "label": "Layout Margin Top",
            "default": 0,
            "min": 0,
            "max": 100
        },
        {
            "type": "range",
            "id": "layout_margin_bottom",
            "label": "Layout Margin Bottom",
            "default": 0,
            "min": 0,
            "max": 100
        },
        {
            "type": "color",
            "id": "layout_background",
            "label": "Layout Background",
            "default": "#ffffff"
        },
        {
            "type": "checkbox",
            "id": "layout_max_width",
            "label": "Layout Max Width",
            "default": false
        }
    ],
    "presets": [
        {
            "category": "Video banner",
            "name": "PC Hero Video #2"
        }
    ]
}
{% endschema %}
<script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.min.js"></script>   

<script>
  function initVideoBanner2() {
    
    var lazyLoadInstance = new LazyLoad();

    window.addEventListener(
      "LazyLoad::Initialized",
      function (event) {
        window.lazyLoadInstance = event.detail.instance;
      },
      false
    );
    
    let items = document.querySelectorAll('.video-banner-pc-{{section.id}}');
    items.forEach(el => {
      let btn = el.querySelector('.video-banner-action-pc-{{section.id}}');
      let video = el.querySelector('video');
      let frame = el.querySelector('iframe');
      if(btn) {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          btn.classList.toggle('active');
          if(btn.classList.contains('active')){
            if(video) {
              video.pause();
            }
            if(frame) {
              frame.contentWindow.postMessage('{"event":"command","func":"' + 'stopVideo' + '","args":""}', '*');
            } 
          } else {
           if(video) {
              video.play();
            }
            if(frame) {
              frame.contentWindow.postMessage('{"event":"command","func":"' + 'playVideo' + '","args":""}', '*');
            } 
          }
        })
      }
    })
  }
  
  document.addEventListener('DOMContentLoaded', initVideoBanner2);
  
  if (Shopify.designMode) {
     document.addEventListener('shopify:section:unload', initVideoBanner2);
     document.addEventListener('shopify:section:load', initVideoBanner2);
  }
</script>
